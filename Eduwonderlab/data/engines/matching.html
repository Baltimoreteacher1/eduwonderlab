<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Matching Game</title>
<style>
body{font-family:Arial;margin:0;background:#f4f6f8;text-align:center}
h1{margin:20px}
.container{display:flex;justify-content:center;gap:40px;margin-top:30px}
.column{display:flex;flex-direction:column;gap:10px}
.card{
padding:12px 18px;
background:white;
border-radius:10px;
cursor:pointer;
border:2px solid #ccc;
transition:.2s;
}
.card:hover{background:#eef}
.selected{border-color:#4caf50;background:#e8f5e9}
.correct{background:#c8e6c9;border-color:#2e7d32}
.wrong{background:#ffcdd2;border-color:#c62828}
#status{margin-top:25px;font-size:18px;font-weight:bold}
</style>
</head>
<body>

<h1>Matching Activity</h1>
<div class="container">
<div id="left" class="column"></div>
<div id="right" class="column"></div>
</div>
<div id="status"></div>

<script>
const params=new URLSearchParams(location.search);
const configUrl=params.get("configUrl");

async function load(){
if(!configUrl){
document.getElementById("status").innerText="Missing config file.";
return;
}

const data=await fetch(configUrl).then(r=>r.json());

document.querySelector("h1").innerText=data.title;

const left=document.getElementById("left");
const right=document.getElementById("right");

let first=null;

data.pairs.forEach(p=>{
let l=document.createElement("div");
l.className="card";
l.textContent=p.left;
l.dataset.match=p.right;
left.appendChild(l);
});

shuffle(data.pairs).forEach(p=>{
let r=document.createElement("div");
r.className="card";
r.textContent=p.right;
r.dataset.match=p.right;
right.appendChild(r);
});

document.querySelectorAll(".card").forEach(card=>{
card.onclick=()=>{
if(!first){
first=card;
card.classList.add("selected");
}else{
if(first===card)return;

if(first.dataset.match===card.dataset.match){
first.classList.remove("selected");
first.classList.add("correct");
card.classList.add("correct");
}else{
first.classList.remove("selected");
first.classList.add("wrong");
card.classList.add("wrong");
setTimeout(()=>{
first.classList.remove("wrong");
card.classList.remove("wrong");
},600);
}
first=null;
}
};
});
}

function shuffle(a){
return a.sort(()=>Math.random()-0.5);
}

load();
</script>

</body>
</html>
